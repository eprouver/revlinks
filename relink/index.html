<html>
<head>
  <meta name="viewport" content="width=device-width, user-scalable=0">
  <style>
*{margin:0;padding:0;font-family:monospace;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}body,html{width:100vw;height:100vh;overflow:hidden;background:#fff}#spinner{transform-style:preserve-3d;-webkit-transform-style:preserve-3d;width:85vmin;height:85vmin;margin:5vmin auto;position:relative;left:-10vmin;border-radius:8px;transition:top 0.25s ease, 1s ease all;-webkit-transition:top 0.25 ease, 1s ease all;-moz-transition:top 0.25 ease, 1s ease all}.por #spinner{margin:0 auto;left:0}#spinner.flip{transform:rotateY(180deg);-webkit-transform:rotateY(180deg)}#holder{display:flex;display:-webkit-flex;-webkit-flex:1;-webkit-flex-direction:column;flex-direction:column;align-content:center;height:100%;width:100%;position:absolute;top:0;background-color:rgba(255, 255, 255, 0.8);transform:translateZ(0px);-webkit-transform:translateZ(0px)}#back{transform:translateZ(-10px);-webkit-transform:translateZ(-10px)}#board{transform:translateZ(10px);-webkit-transform:translateZ(10px)}.row{width:100%;display:flex;display:-webkit-flex;-webkit-flex:1;flex-grow:1;flex-direction:row;align-content:center;align-self:center}.terr{opacity:0.65}.square{display:flex;display:-webkit-flex;-webkit-flex:1;flex-grow:1;position:relative}.square[disabled=disabled]{opacity:0.5}.square[disabled=disabled]:before{content:"";background-color:#aaa;box-shadow:inset 0 0 0 5px #ddd, 0 0 0 5px #aaa}.square[disabled=disabled]:after{content:"";background-color:#ddd;width:48%;height:5px;position:absolute;transform:rotate(45deg) translate(97%);-webkit-transform:rotate(45deg) translate(97%);-moz-transform:rotate(45deg) translate(97%);top:0;left:0;transform-origin:0;-webkit-transform-origin:0;-moz-transform-origin:0;margin-top:-2.5px}.square:before{position:absolute;content:'';height:50%;width:50%;border-radius:50vmin;border-radius:50vmax;background:#aaa;top:25%;left:25%}.square.active:before{background:#01FF70}svg{height:100%;width:100%;position:absolute;top:0;pointer-events:none}line.back{stroke-linecap:round}line.front{stroke-linecap:round;stroke-dasharray:100}line.front.remove{stroke-dasharray:5 19;stroke-linecap:round;stroke-width:15}line.back.remove{stroke:#FFDC00}line.remove{-webkit-animation:remove 0.75s linear forwards;-moz-animation:remove 0.75s linear forwards;animation:remove 0.75s linear forwards}line.drawing{-webkit-animation:dash 0.25s linear;-moz-animation:dash 0.25s linear;animation:dash 0.25s linear}.me{fill:rgba(255, 255, 255, 0.5);stroke-width:5px;opacity:1}@-webkit-keyframes "remove"{from{opacity:1;}to{opacity:0.5;}}@-webkit-keyframes "dash"{from{stroke-dashoffset:100;}to{stroke-dashoffset:0;}}@-webkit-keyframes "spin"{from{-webkit-transform:rotateY(0deg);}to{-webkit-transform:rotateY(360deg);}}@-moz-keyframes "remove"{from{opacity:1;}to{opacity:0.5;}}@-moz-keyframes "dash"{from{stroke-dashoffset:90;}to{stroke-dashoffset:0;}}@-moz-keyframes "spin"{from{-moz-transform:rotateY(0deg);}to{-moz-transform:rotateY(360deg);}}.rotate{-webkit-animation:17s spin linear infinite;-moz-animation:17s spin linear infinite;animation:17s spin linear infinite;pointer-events:none}.hud{width:18%;height:100vh;top:0;right:0;position:fixed;background:#ddd;font-size:2.25vh}.por .hud{width:100vw;height:18vh;bottom:0;left:0;top:auto;right:auto;font-size:3vw}.button{width:18vw;font-size:inherit;border:0;height:8vh;display:block}.button button{background-color:#aaa;color:white;width:100%;height:100%;border:0;font-size:1.4em;border-left:1px solid white;border-bottom:1px solid white}.button button.half{height:100%;width:50%;float:left}.button button.half:first-child{border-left:none}.por .button button.half:first-child{border-top:none}.por .button button.half{width:100%;height:50%;border-left:1px solid white;border-top:1px solid white}.por .button{height:18vh;float:left;width:14vw}.user.active{background-color:white}.por .user.active{border-top:1px solid #ddd}.user{height:21vh;position:relative;border-bottom:1px solid white;transition:0.2s ease background-color;-moz-transition:0.2s ease background-color;-webkit-transition:0.2s ease background-color;border-left:1px solid #ddd}.team{color:#FF4136;stroke:#FF4136;position:relative}.team:nth-child(2){color:#0074D9;stroke:#0074D9}.team:nth-child(3){color:#2ECC40;stroke:#2ECC40}.team:nth-child(4){color:#FF851B;stroke:#FF851B}.por .user{width:17.6vw;float:left;height:18vh;border-left:1px solid white;border-top:1px solid #ddd}.user .image{width:12vmin;height:12vmin;border-radius:10vmin;position:relative;top:1vh;left:1vw;fill:white;height:80%}.npc .image .player{display:none}.image .player{display:block}.npc .image .comp{display:block}.image .comp{display:none}.user h1{position:absolute;bottom:-0.17em;right:0.03em;font-size:12vh}.por .user h1{font-size:10vw}.user h1:before{content:'points:';font-size:0.25em;position:relative;top:-0.25em;font-weight:normal;letter-spacing:-0.1em;color:#111}#modal{width:100vw;height:100vh;background-color:rgba(0, 0, 0, 0.15);position:fixed;top:0;left:0;display:none}.md_content{position:absolute;width:71vw;background-color:white;left:5vw;bottom:5vh;border-radius:2px;text-align:center;font-size:1.8vmin;border:5px solid rgba(12, 12, 12, 0.5);overflow:hidden}.md_content:before{content:'';border:5px solid #FF4136;height:50px;width:50px;position:absolute;right:-30px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);transform:rotate(45deg);top:-30px;background-color:rgba(255, 65, 54, 0.67)}.por .md_content{font-size:2vmin;width:90vw;bottom:22vh}#md_instruct{font-size:2em;text-align:center;padding:1.55em;color:#585858}#md_options{padding-bottom:2em}#md_options button{width:45%;font-size:3em;display:inline-block;color:white;padding:0.1em 0}#md_options button.go{background-color:#2ECC40;border:#2ECC40}#md_options button.cancel{background-color:#FF4136;border:#FF4136}label{font-size:2vw;display:inline-block;padding:3em 0.25em;line-height:2em}.por label{font-size:2.1vw}input[type="checkbox"]:not(:checked)+label{opacity:0.5}.md_input{width:10vw;text-align:center;font-size:2em;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:2px solid #aaa}.p-select.off{pointer-events:none}.p-select.off:after{content:'X';position:absolute;font-size:9em;top:0.4em;left:0;opacity:0.5}#sound.off{text-decoration:line-through}.team.winner{background-color:#FFDC00;transform:scale(1.19);transform-origin:100% 100%;border:0;-webkit-transform:scale(1.19);-webkit-transform-origin:100% 100%;pointer-events:none;border:3px solid}.team.winner:before{content:"Winner!";position:absolute;width:100%;text-align:center;color:#111;font-size:1.4em}.team.winner:after{content:"\2605";position:absolute;top:1vmin;right:0;font-size:7vmin;color:yellow}.por .team.winner:before{font-size:1em}#logo{width:100vw;height:100vh;background-color:rgb(232, 232, 232);pointer-events:auto}#logo .drawing{-webkit-animation-duration:2s;-moz-animation-duration:2s;animation-duration:2s}#logo line.front{display:none}.logo{stroke:#FF4136;stroke-width:25px}.style0{fill:rgba(255, 65, 54, 0.5);stroke-width:5px;stroke:#FF4136}.style2{fill:#FF4136;opacity:0.2;display:none}#t2flip{position:absolute;right:100%;font-size:1.5em;color:#aaa;margin-right:0.25em;pointer-events:none}#t2flip:before{content:"Flip In:"}.por #t2flip{top:-4vmin;left:0;font-size:1em;width:20vmin}
  </style>
</head>
<body> <div id="spinner" class="rotate"> <svg xmlns="http://www.w3.org/2000/svg" id="back" version="1.1" viewBox="0 0 500 500"></svg> <div id="holder"></div><svg xmlns="http://www.w3.org/2000/svg" id="board" version="1.1" viewBox="0 0 500 500"></svg> </div><div class="hud"> <div id="t2flip">0</div><div class="button"> <button class="half" onclick="spinner.classList.toggle('flip'); sound.play('flip')">Flip</button> <button id="sound" class="half" onclick="sound.on=!sound.on; this.classList.toggle('off')">Sound</button> </div><div class="button"> <button class="half" onclick="tut.inc_before()">Next</button> <button class="half" onclick="tut.define()">New</button> </div><div> <div class="user team" id="user_0"> <div class="image"> <svg class="player" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path d="M24 45C12.402 45 3 35.6 3 24S12.402 3 24 3s21 9.4 21 21S35.598 45 24 45z M35.633 39c-0.157-0.231-0.355-0.518-0.514-0.742c-0.277-0.394-0.554-0.788-0.802-1.178C34.305 37.1 32.9 35.2 28 35 c-1.717 0-2.965-1.288-2.968-3.066L25 31c0-0.135-0.016 0.1 0 0v-1l1-1c0.731-0.339 1.66-0.909 2.395-1.464l0.135-0.093 C29.111 27.1 29.9 26.3 30 26l0.036-0.381C30.409 23.7 31 20.2 31 19c0-4.71-2.29-7-7-7c-4.775 0-7 2.224-7 7 c0 1.2 0.6 4.7 1 6.616l0.035 0.352c0.063 0.3 0.8 1.1 1.4 1.462l0.098 0.062C20.333 28 21.3 28.7 22 29 l1 1v1c0.014 0.1 0-0.146 0 0l-0.033 0.934c0 1.775-1.246 3.064-2.883 3.064c-0.001 0-0.002 0-0.003 0 c-4.956 0.201-6.393 2.077-6.395 2.077c-0.252 0.396-0.528 0.789-0.807 1.184c-0.157 0.224-0.355 0.51-0.513 0.7 c3.217 2.5 7.2 4 11.6 4S32.416 41.5 35.6 39z M24 5C13.507 5 5 13.5 5 24c0 5.4 2.2 10.2 5.8 13.7 C11.232 37.1 11.6 36.6 12 36c0 0 1.67-2.743 8-3c0.645 0 0.967-0.422 0.967-1.066h0.001C20.967 31.4 21 31 21 31 c0-0.13-0.021-0.247-0.027-0.373c-0.724-0.342-1.564-0.814-2.539-1.494c0 0-2.4-1.476-2.4-3.133c0 0-1-5.116-1-7 c0-4.644 1.986-9 9-9c6.92 0 9 4.4 9 9c0 1.838-1 7-1 7c0 1.611-2.4 3.133-2.4 3.133c-0.955 0.721-1.801 1.202-2.543 1.5 c-0.005 0.109-0.023 0.209-0.023 0.321c0 0-0.001 0.413-0.001 0.934h0.001C27.033 32.6 27.4 33 28 33c6.424 0.3 8 3 8 3 c0.36 0.6 0.8 1.1 1.1 1.694C40.749 34.2 43 29.4 43 24C43 13.5 34.5 5 24 5z"/> </svg> </div><h1 id="score_0">0</h1> </div><div class="user team npc" id="user_1" style="display:none"> <div class="image"> <svg class="comp" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path clip-rule="evenodd" d="M43 35H29.195c0.595 3.3 2.6 5.6 4.4 7H36c0.553 0 1 0.4 1 1 s-0.447 1-1 1H12c-0.553 0-1-0.447-1-1s0.447-1 1-1h2.403c1.827-1.428 3.807-3.699 4.401-7H5c-2.209 0-4-1.791-4-4V8 c0-2.209 1.791-4 4-4h38c2.209 0 4 1.8 4 4v23C47 33.2 45.2 35 43 35z M17.397 42h13.205c-1.595-1.682-3.015-3.976-3.459-7 h-6.287C20.412 38 19 40.3 17.4 42z M45 8c0-1.104-0.896-2-2-2H5C3.896 6 3 6.9 3 8v19l0 0h42V8z M45 29H3l0 0v2 c0 1.1 0.9 2 2 2h14l0 0h10l0 0h14c1.104 0 2-0.896 2-2V29z M24 32c-0.553 0-1-0.447-1-1s0.447-1 1-1s1 0.4 1 1 S24.553 32 24 32z" fill-rule="evenodd"/> </svg> <svg class="player" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path clip-rule="evenodd" d="M24 45C12.402 45 3 35.6 3 24S12.402 3 24 3s21 9.4 21 21S35.598 45 24 45z M35.633 39c-0.157-0.231-0.355-0.518-0.514-0.742c-0.277-0.394-0.554-0.788-0.802-1.178C34.305 37.1 32.9 35.2 28 35 c-1.717 0-2.965-1.288-2.968-3.066L25 31c0-0.135-0.016 0.1 0 0v-1l1-1c0.731-0.339 1.66-0.909 2.395-1.464l0.135-0.093 C29.111 27.1 29.9 26.3 30 26l0.036-0.381C30.409 23.7 31 20.2 31 19c0-4.71-2.29-7-7-7c-4.775 0-7 2.224-7 7 c0 1.2 0.6 4.7 1 6.616l0.035 0.352c0.063 0.3 0.8 1.1 1.4 1.462l0.098 0.062C20.333 28 21.3 28.7 22 29 l1 1v1c0.014 0.1 0-0.146 0 0l-0.033 0.934c0 1.775-1.246 3.064-2.883 3.064c-0.001 0-0.002 0-0.003 0 c-4.956 0.201-6.393 2.077-6.395 2.077c-0.252 0.396-0.528 0.789-0.807 1.184c-0.157 0.224-0.355 0.51-0.513 0.7 c3.217 2.5 7.2 4 11.6 4S32.416 41.5 35.6 39z M24 5C13.507 5 5 13.5 5 24c0 5.4 2.2 10.2 5.8 13.7 C11.232 37.1 11.6 36.6 12 36c0 0 1.67-2.743 8-3c0.645 0 0.967-0.422 0.967-1.066h0.001C20.967 31.4 21 31 21 31 c0-0.13-0.021-0.247-0.027-0.373c-0.724-0.342-1.564-0.814-2.539-1.494c0 0-2.4-1.476-2.4-3.133c0 0-1-5.116-1-7 c0-4.644 1.986-9 9-9c6.92 0 9 4.4 9 9c0 1.838-1 7-1 7c0 1.611-2.4 3.133-2.4 3.133c-0.955 0.721-1.801 1.202-2.543 1.5 c-0.005 0.109-0.023 0.209-0.023 0.321c0 0-0.001 0.413-0.001 0.934h0.001C27.033 32.6 27.4 33 28 33c6.424 0.3 8 3 8 3 c0.36 0.6 0.8 1.1 1.1 1.694C40.749 34.2 43 29.4 43 24C43 13.5 34.5 5 24 5z" fill-rule="evenodd"/> </svg> </div><h1 id="score_1">0</h1> </div><div class="user team npc" id="user_2" style="display:none"> <div class="image"> <svg class="comp" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path clip-rule="evenodd" d="M43 35H29.195c0.595 3.3 2.6 5.6 4.4 7H36c0.553 0 1 0.4 1 1 s-0.447 1-1 1H12c-0.553 0-1-0.447-1-1s0.447-1 1-1h2.403c1.827-1.428 3.807-3.699 4.401-7H5c-2.209 0-4-1.791-4-4V8 c0-2.209 1.791-4 4-4h38c2.209 0 4 1.8 4 4v23C47 33.2 45.2 35 43 35z M17.397 42h13.205c-1.595-1.682-3.015-3.976-3.459-7 h-6.287C20.412 38 19 40.3 17.4 42z M45 8c0-1.104-0.896-2-2-2H5C3.896 6 3 6.9 3 8v19l0 0h42V8z M45 29H3l0 0v2 c0 1.1 0.9 2 2 2h14l0 0h10l0 0h14c1.104 0 2-0.896 2-2V29z M24 32c-0.553 0-1-0.447-1-1s0.447-1 1-1s1 0.4 1 1 S24.553 32 24 32z" fill-rule="evenodd"/> </svg> <svg class="player" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path clip-rule="evenodd" d="M24 45C12.402 45 3 35.6 3 24S12.402 3 24 3s21 9.4 21 21S35.598 45 24 45z M35.633 39c-0.157-0.231-0.355-0.518-0.514-0.742c-0.277-0.394-0.554-0.788-0.802-1.178C34.305 37.1 32.9 35.2 28 35 c-1.717 0-2.965-1.288-2.968-3.066L25 31c0-0.135-0.016 0.1 0 0v-1l1-1c0.731-0.339 1.66-0.909 2.395-1.464l0.135-0.093 C29.111 27.1 29.9 26.3 30 26l0.036-0.381C30.409 23.7 31 20.2 31 19c0-4.71-2.29-7-7-7c-4.775 0-7 2.224-7 7 c0 1.2 0.6 4.7 1 6.616l0.035 0.352c0.063 0.3 0.8 1.1 1.4 1.462l0.098 0.062C20.333 28 21.3 28.7 22 29 l1 1v1c0.014 0.1 0-0.146 0 0l-0.033 0.934c0 1.775-1.246 3.064-2.883 3.064c-0.001 0-0.002 0-0.003 0 c-4.956 0.201-6.393 2.077-6.395 2.077c-0.252 0.396-0.528 0.789-0.807 1.184c-0.157 0.224-0.355 0.51-0.513 0.7 c3.217 2.5 7.2 4 11.6 4S32.416 41.5 35.6 39z M24 5C13.507 5 5 13.5 5 24c0 5.4 2.2 10.2 5.8 13.7 C11.232 37.1 11.6 36.6 12 36c0 0 1.67-2.743 8-3c0.645 0 0.967-0.422 0.967-1.066h0.001C20.967 31.4 21 31 21 31 c0-0.13-0.021-0.247-0.027-0.373c-0.724-0.342-1.564-0.814-2.539-1.494c0 0-2.4-1.476-2.4-3.133c0 0-1-5.116-1-7 c0-4.644 1.986-9 9-9c6.92 0 9 4.4 9 9c0 1.838-1 7-1 7c0 1.611-2.4 3.133-2.4 3.133c-0.955 0.721-1.801 1.202-2.543 1.5 c-0.005 0.109-0.023 0.209-0.023 0.321c0 0-0.001 0.413-0.001 0.934h0.001C27.033 32.6 27.4 33 28 33c6.424 0.3 8 3 8 3 c0.36 0.6 0.8 1.1 1.1 1.694C40.749 34.2 43 29.4 43 24C43 13.5 34.5 5 24 5z" fill-rule="evenodd"/> </svg> </div><h1 id="score_2">0</h1> </div><div class="user team npc" id="user_3" style="display:none"> <div class="image"> <svg class="comp" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path clip-rule="evenodd" d="M43 35H29.195c0.595 3.3 2.6 5.6 4.4 7H36c0.553 0 1 0.4 1 1 s-0.447 1-1 1H12c-0.553 0-1-0.447-1-1s0.447-1 1-1h2.403c1.827-1.428 3.807-3.699 4.401-7H5c-2.209 0-4-1.791-4-4V8 c0-2.209 1.791-4 4-4h38c2.209 0 4 1.8 4 4v23C47 33.2 45.2 35 43 35z M17.397 42h13.205c-1.595-1.682-3.015-3.976-3.459-7 h-6.287C20.412 38 19 40.3 17.4 42z M45 8c0-1.104-0.896-2-2-2H5C3.896 6 3 6.9 3 8v19l0 0h42V8z M45 29H3l0 0v2 c0 1.1 0.9 2 2 2h14l0 0h10l0 0h14c1.104 0 2-0.896 2-2V29z M24 32c-0.553 0-1-0.447-1-1s0.447-1 1-1s1 0.4 1 1 S24.553 32 24 32z" fill-rule="evenodd"/> </svg> <svg class="player" xmlns="http://www.w3.org/2000/svg" height="48px" version="1.1" viewBox="0 0 48 48" width="48px" xml:space="preserve"> <path clip-rule="evenodd" d="M24 45C12.402 45 3 35.6 3 24S12.402 3 24 3s21 9.4 21 21S35.598 45 24 45z M35.633 39c-0.157-0.231-0.355-0.518-0.514-0.742c-0.277-0.394-0.554-0.788-0.802-1.178C34.305 37.1 32.9 35.2 28 35 c-1.717 0-2.965-1.288-2.968-3.066L25 31c0-0.135-0.016 0.1 0 0v-1l1-1c0.731-0.339 1.66-0.909 2.395-1.464l0.135-0.093 C29.111 27.1 29.9 26.3 30 26l0.036-0.381C30.409 23.7 31 20.2 31 19c0-4.71-2.29-7-7-7c-4.775 0-7 2.224-7 7 c0 1.2 0.6 4.7 1 6.616l0.035 0.352c0.063 0.3 0.8 1.1 1.4 1.462l0.098 0.062C20.333 28 21.3 28.7 22 29 l1 1v1c0.014 0.1 0-0.146 0 0l-0.033 0.934c0 1.775-1.246 3.064-2.883 3.064c-0.001 0-0.002 0-0.003 0 c-4.956 0.201-6.393 2.077-6.395 2.077c-0.252 0.396-0.528 0.789-0.807 1.184c-0.157 0.224-0.355 0.51-0.513 0.7 c3.217 2.5 7.2 4 11.6 4S32.416 41.5 35.6 39z M24 5C13.507 5 5 13.5 5 24c0 5.4 2.2 10.2 5.8 13.7 C11.232 37.1 11.6 36.6 12 36c0 0 1.67-2.743 8-3c0.645 0 0.967-0.422 0.967-1.066h0.001C20.967 31.4 21 31 21 31 c0-0.13-0.021-0.247-0.027-0.373c-0.724-0.342-1.564-0.814-2.539-1.494c0 0-2.4-1.476-2.4-3.133c0 0-1-5.116-1-7 c0-4.644 1.986-9 9-9c6.92 0 9 4.4 9 9c0 1.838-1 7-1 7c0 1.611-2.4 3.133-2.4 3.133c-0.955 0.721-1.801 1.202-2.543 1.5 c-0.005 0.109-0.023 0.209-0.023 0.321c0 0-0.001 0.413-0.001 0.934h0.001C27.033 32.6 27.4 33 28 33c6.424 0.3 8 3 8 3 c0.36 0.6 0.8 1.1 1.1 1.694C40.749 34.2 43 29.4 43 24C43 13.5 34.5 5 24 5z" fill-rule="evenodd"/> </svg> </div><h1 id="score_3">0</h1> </div></div></div><div id="modal"> <div class="md_content" id="md_tut"> <div id="md_instruct"> </div><div id="md_options"> <button id="md_go" class="go" onclick="sound.play('select'); tut.modal.style.display='none'">OK</button> <button id="md_start" class="cancel" onclick="tut.before()">Again!</button> <button id="md_action" class="go" onclick="tut.inc_before()">Next</button> </div></div><div class="md_content" id="md_mult" style="display:none"> <div id="md_build"> <label><b>Players:</b> <br/> <input onchange="tut.reteam(this)" id="md_teams" class="md_input" type="number" value="2" min="1" max="4"/> </label> <label class="team p-select off"> <b>Player 2:</b> <br/> Human? <input type="checkbox" name="pl_1h"/> </label> <label class="team p-select off"> <b>Player 3:</b> <br/> Human? <input type="checkbox" name="pl_2h"/> </label> <label class="team p-select off"> <b>Player 4:</b> <br/> Human? <input type="checkbox" name="pl_3h"/> </label> <label><b>Board Size:</b> <br/> <input onchange="tut.reside(this)" class="md_input" type="number" value="6" min="3" max="20" id="md_size"/> </label> </div><div id="md_options"> <button class="cancel" onclick="tut.cancelNew()">Cancel</button> <button class="go" onclick="tut.tut=false; tut.makeNew()">OK</button> </div></div></div><svg onclick="this.remove(); clearTimeout(timeout)" xmlns="http://www.w3.org/2000/svg" id="logo" viewbox="0 0 1400 800"> <circle xmlns="http://www.w3.org/2000/svg" class="style0" cx="1250" cy="50" r="25"/> <line class="front logo" y2="150" y1="50" x2="50" x1="50"/> <line class="front logo" y2="250" y1="150" x2="50" x1="50"/> <line class="front logo" y2="50" y1="50" x2="150" x1="50"/> <line class="front logo" y2="150" y1="50" x2="150" x1="150"/> <line class="front logo" y2="150" y1="150" x2="50" x1="150"/> <line class="front logo" y2="50" y1="50" x2="250" x1="150"/> <line class="front logo" y2="150" y1="50" x2="250" x1="250"/> <line class="front logo" y2="150" y1="150" x2="150" x1="250"/> <line class="front logo" y2="250" y1="150" x2="250" x1="250"/> <line class="front logo" y2="350" y1="250" x2="50" x1="50"/> <line class="front logo" y2="450" y1="350" x2="50" x1="50"/> <line class="front logo" y2="450" y1="350" x2="350" x1="350"/> <line class="front logo" y2="450" y1="450" x2="450" x1="350"/> <line class="front logo" y2="350" y1="250" x2="450" x1="450"/> <line class="front logo" y2="350" y1="350" x2="350" x1="450"/> <line class="front logo" y2="250" y1="150" x2="550" x1="550"/> <line class="front logo" y2="350" y1="250" x2="550" x1="550"/> <line class="front logo" y2="450" y1="350" x2="550" x1="550"/> <line class="front logo" y2="150" y1="150" x2="650" x1="750"/> <line class="front logo" y2="150" y1="50" x2="550" x1="550"/> <line class="front logo" y2="250" y1="150" x2="650" x1="650"/> <line class="front logo" y2="450" y1="350" x2="650" x1="650"/> <line class="front logo" y2="450" y1="350" x2="750" x1="750"/> <line class="front logo" y2="250" y1="250" x2="950" x1="850"/> <line class="front logo" y2="350" y1="250" x2="950" x1="950"/> <line class="front logo" y2="450" y1="350" x2="950" x1="950"/> <line class="front logo" y2="250" y1="150" x2="1050" x1="1050"/> <line class="front logo" y2="350" y1="250" x2="1050" x1="1050"/> <line class="front logo" y2="450" y1="350" x2="1050" x1="1050"/> <line class="front logo" y2="250" y1="250" x2="1150" x1="1050"/> <line class="front logo" y2="150" y1="250" x2="1150" x1="1150"/> <line class="front logo" y2="150" y1="150" x2="1250" x1="1150"/> <line class="front logo" y2="350" y1="250" x2="1150" x1="1150"/> <line class="front logo" y2="350" y1="350" x2="1250" x1="1150"/> <line class="front logo" y2="450" y1="350" x2="1250" x1="1250"/> <line class="front logo" y2="450" y1="450" x2="1350" x1="1250"/> <line class="front logo" y2="350" y1="350" x2="250" x1="150"/> <line class="front logo" y2="450" y1="350" x2="250" x1="250"/> <line class="front logo" y2="250" y1="250" x2="150" x1="50"/> <line class="front logo" y2="250" y1="150" x2="150" x1="150"/> <line class="front logo" y2="350" y1="250" x2="150" x1="150"/> <line class="front logo" y2="250" y1="250" x2="250" x1="150"/> <line class="front logo" y2="250" y1="350" x2="350" x1="350"/> <line class="front logo" y2="250" y1="250" x2="450" x1="350"/> <line class="front logo" y2="250" y1="250" x2="750" x1="650"/> <line class="front logo" y2="150" y1="250" x2="750" x1="750"/> <line class="front logo" y2="350" y1="350" x2="850" x1="750"/> <line class="front logo" y2="250" y1="350" x2="850" x1="850"/> <line class="front logo" y2="50" y1="150" x2="1050" x1="1050"/> <line class="front logo" y2="50" y1="150" x2="1250" x1="1250"/> <rect class="style2" height="100" width="100" y="50" x="50"/> <rect class="style2" height="100" width="100" y="50" x="150"/> <rect class="style2" height="100" width="100" y="150" x="50"/> <rect class="style2" height="100" width="100" y="150" x="150"/> <rect class="style2" height="100" width="100" y="250" x="350"/> <rect class="style2" height="100" width="100" y="150" x="650"/> </svg></body>
<script>
function repos(){spinner.style.top=.4*window.innerHeight-.5*spinner.getBoundingClientRect().height}function resizer(){return window.innerHeight>window.innerWidth?(document.body.classList.add("por"),clearTimeout(timeout),void(timeout=setTimeout(repos,1e3))):(clearTimeout(timeout),spinner.style.top=0,void document.body.classList.remove("por"))}function SfxrParams(){this.setSettings=function(t){for(var e=0;24>e;e++)this[String.fromCharCode(97+e)]=t[e]||0;this.c<.01&&(this.c=.01);var r=this.b+this.c+this.e;if(.18>r){var n=.18/r;this.b*=n,this.c*=n,this.e*=n}}}function SfxrSynth(){this._params=new SfxrParams;var t,e,r,n,s,a,i,o,u,l,c,d;this.reset=function(){var t=this._params;n=100/(t.f*t.f+.001),s=100/(t.g*t.g+.001),a=1-t.h*t.h*t.h*.01,i=-t.i*t.i*t.i*1e-6,t.a||(c=.5-t.n/2,d=5e-5*-t.o),o=t.l>0?1-t.l*t.l*.9:1+t.l*t.l*10,u=0,l=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.totalReset=function(){this.reset();var n=this._params;return t=n.b*n.b*1e5,e=n.c*n.c*1e5,r=n.e*n.e*1e5+10,t+e+r|0},this.synthWave=function(y,m){var f=this._params,p=1!=f.s||f.v,h=f.v*f.v*.1,v=1+3e-4*f.w,g=f.s*f.s*f.s*.1,w=1+1e-4*f.t,b=1!=f.s,x=f.x*f.x,E=f.g,k=f.q||f.r,A=f.r*f.r*f.r*.2,L=f.q*f.q*(f.q<0?-1020:1020),B=f.p?((1-f.p)*(1-f.p)*2e4|0)+32:0,M=f.d,I=f.j/2,q=f.k*f.k*.01,T=f.a,_=t,P=1/t,N=1/e,S=1/r,C=5/(1+f.u*f.u*20)*(.01+g);C>.8&&(C=.8),C=1-C;for(var z,F,j,H,R,W,G=!1,D=0,U=0,J=0,O=0,X=0,K=0,Q=0,V=0,Y=0,Z=0,$=new Array(1024),te=new Array(32),ee=$.length;ee--;)$[ee]=0;for(var ee=te.length;ee--;)te[ee]=2*Math.random()-1;for(var ee=0;m>ee;ee++){if(G)return ee;if(B&&++Y>=B&&(Y=0,this.reset()),l&&++u>=l&&(l=0,n*=o),a+=i,n*=a,n>s&&(n=s,E>0&&(G=!0)),F=n,I>0&&(Z+=q,F*=1+Math.sin(Z)*I),F|=0,8>F&&(F=8),T||(c+=d,0>c?c=0:c>.5&&(c=.5)),++U>_)switch(U=0,++D){case 1:_=e;break;case 2:_=r}switch(D){case 0:J=U*P;break;case 1:J=1+2*(1-U*N)*M;break;case 2:J=1-U*S;break;case 3:J=0,G=!0}k&&(L+=A,j=0|L,0>j?j=-j:j>1023&&(j=1023)),p&&v&&(h*=v,1e-5>h?h=1e-5:h>.1&&(h=.1)),W=0;for(var re=8;re--;){if(Q++,Q>=F&&(Q%=F,3==T))for(var ne=te.length;ne--;)te[ne]=2*Math.random()-1;switch(T){case 0:R=c>Q/F?.5:-.5;break;case 1:R=1-Q/F*2;break;case 2:H=Q/F,H=H>.5?6.28318531*(H-1):6.28318531*H,R=0>H?1.27323954*H+.405284735*H*H:1.27323954*H-.405284735*H*H,R=0>R?.225*(R*-R-R)+R:.225*(R*R-R)+R;break;case 3:R=te[Math.abs(32*Q/F|0)]}p&&(z=K,g*=w,0>g?g=0:g>.1&&(g=.1),b?(X+=(R-K)*g,X*=C):(K=R,X=0),K+=X,O+=K-z,O*=1-h,R=O),k&&($[V%1024]=R,R+=$[(V-j+1024)%1024],V++),W+=R}W*=.125*J*x,y[ee]=W>=1?32767:-1>=W?-32768:32767*W|0}return m}}function makeGame(t,e,r){spinner.classList.remove("rotate");var n={width:t,height:t,players:e,humans:r||[],colors:["#FF4136","#0074D9","#2ECC40","#FF851B"],flip:5,places:function(t){for(var e=[],r=0;t>r;r++)e.push(4*r);return e.reduce(function(t,e){return t+e},0)}(t)};toArray(document.getElementsByClassName("user")).forEach(function(t,r){t.style.display=e>r?"block":"none"});var s=function(){return{turn:0,nextPlayer:function(){if(a.currentPlayer++,i.drawFront(),a.currentPlayer>=a.players.length&&(a.currentPlayer=0,document.getElementById("user_"+a.currentPlayer).classList.add("active"),s.turn++,s.turn>=n.flip))return s.turn=0,t2flip.innerHTML=n.flip-s.turn,sound.play("flip"),void a.backTurn();if(t2flip.innerHTML=n.flip-s.turn,document.getElementById("user_"+a.currentPlayer).classList.add("active"),0!=a.currentPlayer&&!a.players[a.currentPlayer].human){var t,e,r=!1,o=[];if(Array.apply(null,{length:n.players}).map(Number.call,Number).sort(function(){return Math.random()>.5}).some(function(s){for(var i=0;2>i;i++){for(var u=0;u<n.height-(0==i?0:1);u++){for(var l=0;l<n.width-(0==i?1:0);l++)if(t={x:l,y:u},e={x:l+(0==i?1:0),y:u+(0==i?0:1)},!a.segmentExists("all",t,e)){if(r=a.setSegment(s,t,e,!0))break;o.push({source:t,target:e})}if(r)break}if(r)break}return r}),!r){var u,l=a.players[a.currentPlayer].position;l&&(u=o.filter(function(t){return t.source.x==l.x||t.source.y==l.y}).sort(function(t,e){return Math.min(Math.sqrt(Math.pow(t.source.x-l.x,2)+Math.pow(t.source.y-l.y,2)),Math.sqrt(Math.pow(t.target.x-l.x,2)+Math.pow(t.target.y-l.y,2)))-Math.min(Math.sqrt(Math.pow(e.source.x-l.x,2)+Math.pow(e.source.y-l.y,2)),Math.sqrt(Math.pow(e.target.x-l.x,2)+Math.pow(e.target.y-l.y,2)))}),u=u[0]),void 0==u&&(u=o[~~(Math.random()*o.length)]),t=u.source,e=u.target}a.setSegment(a.currentPlayer,t,e)}},checkWinner:function(){return n.places<=a.players.reduce(function(t,e){return t+e.segments.length},0)?a.backTurn(!0)?(s.turn=0,setTimeout(function(){s.nextPlayer()},2500),!0):(i.drawFront(!0),setTimeout(function(){a.players.sort(function(t,e){return e.squares.length-t.squares.length}).filter(function(t,e,r){return t.squares.length==r[0].squares.length&&t.squares.length}).forEach(function(t){document.getElementById("user_"+t.index).classList.add("winner")}),sound.play("finish"),t2flip.style.display="none",tut.next()},500),!0):!1}}}(),a=function(){function t(t,e,r,n,s,a,i,o){var u=((t*n-e*r)*(s-i)-(t-r)*(s*o-a*i))/((t-r)*(a-o)-(e-n)*(s-i)),l=((t*n-e*r)*(a-o)-(e-n)*(s*o-a*i))/((t-r)*(a-o)-(e-n)*(s-i));if(isNaN(u)||isNaN(l))return!1;if(t>=r){if(!(u>=r&&t>=u))return!1}else if(!(u>=t&&r>=u))return!1;if(e>=n){if(!(l>=n&&e>=l))return!1}else if(!(l>=e&&n>=l))return!1;if(s>=i){if(!(u>=i&&s>=u))return!1}else if(!(u>=s&&i>=u))return!1;if(a>=o){if(!(l>=o&&a>=l))return!1}else if(!(l>=a&&o>=l))return!1;return!0}function e(t,e,n){return"all"==t&&(t=[],t=t.concat.apply(t,r.map(function(t){return t.segments}))),t.filter(function(t){return u(t.source,e)&&u(t.target,n)?!0:u(t.target,e)&&u(t.source,n)?!0:!1}).length>0}var r=Array.apply(null,Array(n.players)).map(function(t,e){return{index:e,human:0==e||n.humans.indexOf(e)>-1,segments:[],squares:[],backs:[],position:!1,removeJunction:function(t,e){this.backs.forEach(function(r){(r==t||r==e)&&(r.draw="remove")}),this.segments.forEach(function(r){(u(r.source,t.from)||u(r.source,t.to)||u(r.target,t.from)||u(r.target,t.to)||u(r.source,e.from)||u(r.source,e.to)||u(r.target,e.from)||u(r.target,e.to))&&(r.draw="remove")})}}}),o=0,u=function(t,e){return t.x==e.x&&t.y==e.y?!0:!1};return{backTurn:function(e){var n=!1;return o=-999,r.forEach(function(e){e.backs.forEach(function(r){e.backs.forEach(function(s){r!=s&&t(r.source.x,r.source.y,r.target.x,r.target.y,s.source.x,s.source.y,s.target.x,s.target.y)&&(e.removeJunction(r,s),n=!0)})})}),(!e||n)&&(spinner.classList.toggle("flip"),setTimeout(function(){i.drawBack(),setTimeout(function(){spinner.classList.toggle("flip"),i.drawFront(),setTimeout(function(){document.getElementById("user_"+a.currentPlayer).classList.add("active")},500)},700)},700)),n},removeBack:function(t){r[t.player].backs=r[t.player].backs.filter(function(t){return"remove"!==t.draw})},removeSegment:function(t){r[t.player].segments=r[t.player].segments.filter(function(t){return"remove"!==t.draw}),r[t.player].squares=r[t.player].squares.filter(function(e){var r,n=!0;return t.source.x!=t.target.x?(r={x:Math.min(t.source.x,t.target.x),y:t.source.y},u(e,r)&&(n=!1),r.y-=1,u(e,r)&&(n=!1)):(r={x:t.source.x,y:Math.min(t.source.y,t.target.y)},u(e,r)&&(n=!1),r.x-=1,u(e,r)&&(n=!1)),n||sound.play("lost"),n})},segmentExists:e,setSegment:function(t,n,a,o){if(e("all",n,a))return!1;o||r[t].segments.push({source:n,target:a,draw:"first",player:t});var u=[],l=[];return n.x!=a.x?u=[1,-1].filter(function(s){return e(r[t].segments,{x:n.x,y:n.y+s},{x:a.x,y:a.y+s})&&e(r[t].segments,{x:n.x,y:n.y},{x:n.x,y:n.y+s})&&e(r[t].segments,{x:a.x,y:a.y},{x:a.x,y:a.y+s})?(o||(i.drawFront(t,r[t].squares.push({x:Math.min(n.x,a.x),y:Math.min(n.y,a.y,n.y+s,a.y+s)})),sound.play("square")),!0):!1}):l=[1,-1].filter(function(s){return e(r[t].segments,{x:n.x+s,y:n.y},{x:a.x+s,y:a.y})&&e(r[t].segments,{x:n.x,y:n.y},{x:n.x+s,y:n.y})&&e(r[t].segments,{x:a.x,y:a.y},{x:a.x+s,y:a.y})?(o||(r[t].squares.push({y:Math.min(n.y,a.y),x:Math.min(n.x,a.x,n.x+s,a.x+s)}),sound.play("square")),!0):!1}),o||setTimeout(function(){function e(t,e){var r={x:e.x-t.x,y:e.y-t.y},n=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2));return 0==n?t:(r.x=r.x/n,r.y=r.y/n,r={x:t.x+.15*r.x,y:t.y+.15*r.y})}if(r[t].position){var i=e(r[t].position,n),o=e(n,r[t].position);r[t].backs.push({source:i,target:o,from:r[t].position,to:n,draw:!0,from:new Date,player:t})}r[t].position=a,s.checkWinner()||s.nextPlayer()},t?250:0),u.length||l.length},players:r,currentPlayer:o}}(),i=function(){function t(t){toArray(t.childNodes).forEach(function(t){t.remove()})}function e(t){var e=(0==s.turn,a.currentPlayer);if(e>=a.players.length&&(e=0),a.players[e].position&&a.players[e].human){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",100*a.players[e].position.x+50),r.setAttribute("cy",100*a.players[e].position.y+50),r.setAttribute("r",25),r.setAttribute("stroke",n.colors[e]),r.setAttribute("class","me"),t.appendChild(r)}}var r=document.getElementById("back"),i=document.getElementById("board"),o="0 0 "+100*n.width+" "+100*n.height;return i.setAttribute("viewBox",o),r.setAttribute("viewBox",o),{drawBack:function(s){t(r);var i=[];i=i.concat.apply(i,a.players.map(function(t){return t.backs})).sort(function(t,e){return t.from-e.from});var o=!1;i.forEach(function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("x1",50+100*t.source.x),e.setAttribute("x2",50+100*t.target.x),e.setAttribute("y1",50+100*t.source.y),e.setAttribute("y2",50+100*t.target.y),e.setAttribute("class","back"),e.setAttribute("stroke",n.colors[t.player]||"black"),e.setAttribute("stroke-width",10),r.appendChild(e),"first"==t.draw?(e.classList.add("drawing"),t.draw=!1):"remove"==t.draw&&(e.classList.add("remove"),o=!0,s||a.removeBack(t))}),o&&sound.play("remove"),e(r,s)},drawFront:function(r,r){t(i),e(i),a.players.forEach(function(t,e){t.segments.forEach(function(t){var s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("x1",50+100*t.source.x),s.setAttribute("x2",50+100*t.target.x),s.setAttribute("y1",50+100*t.source.y),s.setAttribute("y2",50+100*t.target.y),s.setAttribute("class","front"),s.setAttribute("stroke",n.colors[e]||"black"),s.setAttribute("stroke-width",25),i.appendChild(s),"first"==t.draw?(s.classList.add("drawing"),sound.play("draw"),t.draw=!1):"remove"==t.draw&&(s.classList.add("remove"),r||a.removeSegment(t))}),t.squares.forEach(function(t){var r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("x",100*t.x+50),r.setAttribute("y",100*t.y+50),r.setAttribute("width",100),r.setAttribute("height",100),r.setAttribute("class","terr"),r.setAttribute("fill",n.colors[e]),i.appendChild(r)}),document.getElementById("user_"+e).classList.remove("active"),document.getElementById("score_"+e).innerHTML=t.squares.length}),this.drawBack(r)}}}(),o=function(){var t=document.getElementById("holder"),e=function(t,e,r){null==t&&(t=function(){return this});for(var s=0;s<n.height;s++){var a=r||{};a.h=s,a=t.apply(a);for(var i=0;i<n.width;i++)a.w=i,e.apply(a)}},r=function(t,e){return document.getElementById("b_"+e+"_"+t)},s=function(t){t.removeAttribute("disabled"),t.removeEventListener(envEvent,i),t.removeEventListener(envEvent,o),t.addEventListener(envEvent,u),t.classList.remove("active")},i=function(){e(null,function(){s(r(this.w,this.h))})},o=function(){if(a.players[a.currentPlayer].human){var t=this.id.split("_").map(function(t){return parseInt(t)});a.setSegment(a.currentPlayer,{y:parseInt(this.dataset.sx),x:parseInt(this.dataset.sy)},{y:t[2],x:t[1]}),e(null,function(){s(r(this.w,this.h))})}},u=function(){var t=this;t.removeEventListener(envEvent,u),t.addEventListener(envEvent,i),t.classList.add("active");var n=t.id.split("_").map(function(t){return parseInt(t)});toArray(document.getElementsByClassName("square")).forEach(function(e){e!=t&&(e.setAttribute("disabled","disabled"),e.classList.remove("active"))}),e(null,function(){if(Math.abs(this.x-this.w)+Math.abs(this.y-this.h)<2){var e=r(this.w,this.h);e.removeAttribute("disabled"),e!=t&&(e.removeEventListener(envEvent,u),e.addEventListener(envEvent,o),e.dataset.sx=this.x,e.dataset.sy=this.y)}},{y:n[1],x:n[2]})};return{create:function(){t.innerHTML="",e(function(){return this.row=document.createElement("div"),this.row.classList.add("row"),t.appendChild(this.row),this},function(){var t=document.createElement("div");t.setAttribute("id","b_"+this.w+"_"+this.h),t.addEventListener(envEvent,u),t.classList.add("square"),this.row.appendChild(t)})}}}();spinner.classList.remove("flip"),i.drawFront(),i.drawBack(),o.create(),t2flip.innerHTML=n.flip,t2flip.style.display="block",toArray(document.getElementsByClassName("team")).forEach(function(t){t.classList.remove("winner")}),document.getElementById("user_"+a.currentPlayer).classList.add("active")}document.ontouchmove=function(t){t.preventDefault()};var envEvent=/iPad|iPhone|iPod/.test(navigator.platform)?"touchstart":"click",toArray=function(t){return Array.prototype.slice.call(t)},timeout,spinner=document.getElementById("spinner"),t2flip=document.getElementById("t2flip");repos(),resizer(),window.addEventListener("resize",resizer);var synth=new SfxrSynth;window.jsfxr=function(t){synth._params.setSettings(t);var e=synth.totalReset(),r=new Uint8Array(4*((e+1)/2|0)+44),n=2*synth.synthWave(new Uint16Array(r.buffer,44),e),s=new Uint32Array(r.buffer,0,44);s[0]=1179011410,s[1]=n+36,s[2]=1163280727,s[3]=544501094,s[4]=16,s[5]=65537,s[6]=44100,s[7]=88200,s[8]=1048578,s[9]=1635017060,s[10]=n,n+=44;for(var a=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="data:audio/wav;base64,";n>a;a+=3){var u=r[a]<<16|r[a+1]<<8|r[a+2];o+=i[u>>18]+i[u>>12&63]+i[u>>6&63]+i[63&u]}return a-=n,o.slice(0,o.length-a)+"==".slice(0,a)};var sound=function(){var t={};return t.draw=new Audio,t.draw.src=jsfxr([2,,.0789,.5302,.1631,.23,,,,,,,,,,,,,1,,,,,.52]),t.flip=new Audio,t.flip.src=jsfxr([2,,.42,,.17,.14,,.28,,,,-.6,.34,.4048,,,,,.28,-.0799,,,-.04,.34]),t.remove=new Audio,t.remove.src=jsfxr([2,,.27,,.61,.23,,.12,,.86,.3094,,,,,,,,1,,,,,.4]),t.select=new Audio,t.select.src=jsfxr([2,,.1119,,.1459,.4676,,,,,,,,.3996,,,,,1,,,.1,,.4]),t.square=new Audio,t.square.src=jsfxr([2,,.0482,.3012,.4205,.38,,,,,,.54,.5666,,,,,,1,,,,,.4]),t.lost=new Audio,t.lost.src=jsfxr([2,,.0482,.3012,.4205,.38,,,,,,-.3,.5666,,,,,,1,,,,,.4]),t.finish=new Audio,t.finish.src=jsfxr([2,,.45,.3007,.43,.3,,,,,,.4862,.33,,,,,,.68,,,,-.78,.33]),{on:!0,play:function(e){this.on&&(t[e].load(),t[e].play())}}}(),logo=document.getElementById("logo");toArray(document.querySelectorAll("line.front")).forEach(function(t){t.classList.add("drawing"),t.style.display="block"}),timeout=setTimeout(function(){sound.play("flip"),toArray(document.getElementsByClassName("style2")).forEach(function(t){t.style.display="block"}),timeout=setTimeout(function(){logo.remove()},2400)},2e3);var tut={tut:!0,current:0,modal:document.getElementById("modal"),instruct:document.getElementById("md_instruct"),go:document.getElementById("md_go"),start:document.getElementById("md_start"),action:document.getElementById("md_action"),mytut:document.getElementById("md_tut"),mult:document.getElementById("md_mult"),teams:toArray(document.getElementsByClassName("p-select")),reside:function(t){t.value<3||void 0==t.value?t.value=3:t.value>20&&(t.value=20)},reteam:function(t){t.value<1||void 0==t.value?t.value=1:t.value>4&&(t.value=4);var e=parseInt(t.value)-1;tut.teams.forEach(function(t,r){e>r?t.classList.remove("off"):t.classList.add("off")})},define:function(){tut.modal.style.display="block",tut.mytut.style.display="none",tut.mult.style.display="block"},makeNew:function(){sound.play("select"),tut.modal.style.display="none",tut.mytut.style.display="block",tut.mult.style.display="none";var t=tut.teams.map(function(t,e){return t.getElementsByTagName("input")[0].checked?(document.getElementById("user_"+(e+1)).classList.remove("npc"),e+1):void document.getElementById("user_"+(e+1)).classList.add("npc")}).filter(function(t){return void 0!=t});makeGame(parseInt(document.getElementById("md_size").value),parseInt(document.getElementById("md_teams").value),t)},cancelNew:function(){tut.modal.style.display="none",tut.mytut.style.display="block",tut.mult.style.display="none"},alert:function(t){tut.modal.style.display="block",tut.instruct.innerHTML=t,tut.go.style.display="inline-block",tut.start.style.display="none",tut.action.style.display="none",tut.start.removeEventListener(envEvent,tut.before)},confirm:function(t){tut.modal.style.display="block",tut.instruct.innerHTML=t,tut.go.style.display="none",tut.start.style.display="inline-block",tut.action.style.display="inline-block"},inc_before:function(){sound.play("select"),tut.tut&&(tut.current+=1),tut.tut=!0,tut.before()},before:function(){tut.modal.style.display="none";var t;this.current>this.stages.length-1?(t=this.stages[this.stages.length-1],t.size+=1):t=this.stages[this.current],makeGame(t.size,t.players),t.pre&&setTimeout(function(){tut.alert(t.pre)},100)},next:function(){spinner.classList.add("rotate"),tut.tut?setTimeout(function(){tut.confirm(tut.stages[Math.min(tut.current,tut.stages.length-1)].post)},100):setTimeout(function(){tut.define()},1500)},stages:[{pre:"Connect the four circles to make a square.<br>Select a corner circle to start a link...<br>then select a horizontal or vertical neighbor to create a link.",post:"Got it?",size:2,players:1},{pre:"Cross the reverse-links.<br>Make two links far away.<br>See how they're linked from behind?<br>(Press 'Flip' to see the reverse side of the board).<br>Crossed reverse-links are removed periodically and before anyone wins.",post:"Press NEXT if you saw the reverse-links and how they're removed.",size:3,players:1},{pre:"Now another player!<br>They will prevent you from making squares.<br>Trick them into crossing their reverse-links.",post:"Ready for more?",size:5,players:2},{pre:"More board... more players.",post:"Ready for more?",size:6,players:3},{pre:"The computer players are not super smart.<br>Can you stop them from getting any squares?",post:"Ready for more?",size:7,players:3},{pre:'Bigger boards... bigger boards!<br>Press "New" to make a custom board or to play multiplayer.',post:"Ready for more?",size:8,players:4},{pre:!1,post:"Ready for more?",size:9,players:4}]};tut.before();
</script>
</html>
